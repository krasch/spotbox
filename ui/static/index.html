<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

     <script type="text/javascript" charset="utf-8" src="3rdparty/js/spotify-web-api.js"></script>
     <script src="https://cdn.rawgit.com/riot/riot/master/riot+compiler.min.js"></script>

     <script type="text/javascript" charset="utf-8" src="js/controller.js"></script>
     <script type="text/javascript" charset="utf-8" src="js/spotify-api.js"></script>

     <script type="riot/tag" src="js/player.tag"></script>
     <script type="riot/tag" src="js/player-control.tag"></script>
     <script type="riot/tag" src="js/current.tag"></script>
     <script type="riot/tag" src="js/queue.tag"></script>
     <script type="riot/tag" src="js/search.tag"></script>
     <script type="riot/tag" src="js/uri-input.tag"></script>


     <link rel="stylesheet" href="css/spotbox.css">
</head>
<body>

<div class="center">
    <div id="top-bar">
       <a href="#player"><button type="button">Player</button></a>
       <a href="#search"><button type="button">Search</button></a>
       <a href="#uri-input"><button type="button">Enter URI</button></a>
    </div>

    <player id="player"></player>
    <search id="search"></search>
    <uri-input id="uri-input"></uri-input>
</div>


<script>
function showTab(tabId) {
    document.getElementById("player").style.display = "none";
    document.getElementById("search").style.display = "none";
    document.getElementById("uri-input").style.display = "none";
    document.getElementById(tabId).style.display = "block";
}

function handleError(err) {
    console.log(err);
}

// mount all UI elements
riot.mount('player', controller);
riot.mount('search', controller);
riot.mount('uri-input', controller);

// extremely simple router - take a path and make tab with that id visible, make all other tabs invisible
// do not want to riot mount/unmount here because tags would loose their current state
riot.route(showTab);
riot.route.start(true)

// player is the first page user will see
riot.route('player');

// there are some timing issues between riot mounting and the socket - sometimes mounting takes to long and the first
// messages from the socket are lost.
// waiting 100ms before creating the socket connection seems to help but is a bit unsatisfactory
setTimeout(function(){createSocket();}, 100)

</script>
</body>
</html>